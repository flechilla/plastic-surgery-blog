---
import { getCollection } from 'astro:content';
import BaseLayout from '@layouts/BaseLayout.astro';
import PostCard from '@components/PostCard.astro';

const posts = await getCollection('blog', ({ data }) => !data.draft);
const sortedPosts = posts.sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime()
);

const featuredPost = sortedPosts.find((p) => p.data.featured);
const recentPosts = sortedPosts.filter((p) => p !== featuredPost).slice(0, 6);

const categoryFilters = [
  { label: 'Facial', slug: 'facial' },
  { label: 'Body', slug: 'body' },
  { label: 'Breast', slug: 'breast' },
  { label: 'Non-Surgical', slug: 'non-surgical' },
  { label: 'Recovery', slug: 'recovery' },
  { label: 'News', slug: 'news' },
];

const categories = [
  {
    name: 'Facial',
    slug: 'facial',
    description: 'Rhinoplasty, facelifts, and facial rejuvenation procedures',
    icon: 'M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z',
  },
  {
    name: 'Body',
    slug: 'body',
    description: 'Liposuction, tummy tucks, and body contouring',
    icon: 'M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z',
  },
  {
    name: 'Breast',
    slug: 'breast',
    description: 'Augmentation, reduction, lifts, and revision surgery',
    icon: 'M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z',
  },
  {
    name: 'Non-Surgical',
    slug: 'non-surgical',
    description: 'Injectables, laser treatments, and skin rejuvenation',
    icon: 'M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z',
  },
  {
    name: 'Recovery',
    slug: 'recovery',
    description: 'Healing timelines, aftercare, and recovery tips',
    icon: 'M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z',
  },
  {
    name: 'News',
    slug: 'news',
    description: 'Industry trends, new techniques, and practice updates',
    icon: 'M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6V7.5z',
  },
];
---

<BaseLayout title="Aesthetic Surgery Journal | Expert Insights on Cosmetic Procedures">
  <!-- Hero Section -->
  <section class="relative overflow-hidden bg-ivory">
    <div class="mx-auto max-w-7xl px-6 py-16 md:py-24 lg:px-10 lg:py-32">
      <div class="grid items-center gap-12 lg:grid-cols-2 lg:gap-20">
        <div class="animate-on-scroll">
          <p
            class="mb-4 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold"
          >
            Board-Certified Expertise
          </p>
          <h1
            class="font-serif text-4xl leading-[1.1] font-medium text-charcoal md:text-5xl lg:text-6xl"
          >
            Your guide to
            <span class="italic text-rose-gold-dark">confident</span>
            aesthetic decisions
          </h1>
          <p class="mt-6 max-w-lg text-lg leading-relaxed text-charcoal/60">
            Evidence-based insights from board-certified surgeons. Make informed decisions about your
            aesthetic journey with expert guidance you can trust.
          </p>
          <div class="mt-8 flex flex-wrap items-center gap-4">
            <a
              href="#featured"
              class="inline-flex items-center gap-2 rounded-lg bg-gradient-to-br from-rose-gold to-rose-gold-dark px-6 py-3.5 text-sm font-medium text-white shadow-cta transition-all duration-300 hover:-translate-y-0.5 hover:shadow-cta-hover"
            >
              Explore Articles
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"></path>
              </svg>
            </a>
            <a
              href="/about"
              class="inline-flex items-center gap-2 rounded-lg border border-warm-sand px-6 py-3.5 text-sm font-medium text-charcoal transition-all duration-200 hover:border-soft-blush hover:bg-soft-blush"
            >
              Meet Our Surgeons
            </a>
          </div>

          <!-- Trust Indicators -->
          <div class="mt-12 flex flex-wrap items-center gap-8">
            <div class="flex items-center gap-2">
              <div class="flex h-8 w-8 items-center justify-center rounded-full bg-deep-sage/10">
                <svg class="h-4 w-4 text-deep-sage" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"></path>
                </svg>
              </div>
              <span class="text-xs font-medium text-charcoal/50">Board Certified</span>
            </div>
            <div class="flex items-center gap-2">
              <div class="flex h-8 w-8 items-center justify-center rounded-full bg-soft-navy/10">
                <svg class="h-4 w-4 text-soft-navy" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"></path>
                </svg>
              </div>
              <span class="text-xs font-medium text-charcoal/50">Peer Reviewed</span>
            </div>
            <div class="flex items-center gap-2">
              <div class="flex h-8 w-8 items-center justify-center rounded-full bg-rose-gold/10">
                <svg class="h-4 w-4 text-rose-gold" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.438 60.438 0 00-.491 6.347A48.62 48.62 0 0112 20.904a48.62 48.62 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.636 50.636 0 00-2.658-.813A59.906 59.906 0 0112 3.493a59.903 59.903 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0112 13.489a50.702 50.702 0 017.74-3.342"></path>
                </svg>
              </div>
              <span class="text-xs font-medium text-charcoal/50">Evidence Based</span>
            </div>
          </div>
        </div>

        <!-- Hero Visual -->
        <div class="animate-on-scroll stagger-2 relative hidden lg:block">
          <div class="relative">
            <!-- Decorative elements -->
            <div class="absolute -top-6 -right-6 h-72 w-72 rounded-full bg-soft-blush/40 blur-3xl"></div>
            <div class="absolute -bottom-6 -left-6 h-48 w-48 rounded-full bg-warm-sand/50 blur-2xl"></div>

            <!-- Main visual card -->
            <div class="relative rounded-3xl bg-gradient-to-br from-warm-sand/30 to-soft-blush/30 p-12">
              <div class="space-y-6">
                <div class="h-48 rounded-2xl bg-gradient-to-br from-soft-blush/60 to-warm-sand/40"></div>
                <div class="flex gap-4">
                  <div class="h-24 flex-1 rounded-xl bg-gradient-to-br from-warm-sand/50 to-ivory"></div>
                  <div class="h-24 flex-1 rounded-xl bg-gradient-to-br from-soft-blush/40 to-ivory"></div>
                </div>
                <!-- Stats overlay -->
                <div class="flex items-center justify-between rounded-xl bg-white/80 p-4 shadow-sm backdrop-blur-sm">
                  <div class="text-center">
                    <p class="font-serif text-2xl font-medium text-charcoal">15K+</p>
                    <p class="text-[10px] uppercase tracking-wider text-charcoal/40">Readers</p>
                  </div>
                  <div class="h-8 w-px bg-warm-sand"></div>
                  <div class="text-center">
                    <p class="font-serif text-2xl font-medium text-charcoal">200+</p>
                    <p class="text-[10px] uppercase tracking-wider text-charcoal/40">Articles</p>
                  </div>
                  <div class="h-8 w-px bg-warm-sand"></div>
                  <div class="text-center">
                    <p class="font-serif text-2xl font-medium text-charcoal">12</p>
                    <p class="text-[10px] uppercase tracking-wider text-charcoal/40">Surgeons</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Subtle divider -->
    <div class="h-px bg-gradient-to-r from-transparent via-warm-sand/60 to-transparent"></div>
  </section>

  <!-- Featured Post -->
  {
    featuredPost && (
      <section id="featured" class="bg-ivory py-16 md:py-24">
        <div class="mx-auto max-w-7xl px-6 lg:px-10">
          <div class="animate-on-scroll mb-10 flex items-end justify-between">
            <div>
              <p class="mb-2 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold">
                Featured
              </p>
              <h2 class="font-serif text-3xl font-medium text-charcoal md:text-4xl">
                Editor&rsquo;s pick
              </h2>
            </div>
            <a
              href="/blog"
              class="hidden text-sm font-medium text-charcoal/50 transition-colors hover:text-charcoal md:inline-flex md:items-center md:gap-1"
            >
              View all articles
              <svg
                class="h-3.5 w-3.5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                />
              </svg>
            </a>
          </div>
          <div class="animate-on-scroll stagger-1">
            <PostCard
              title={featuredPost.data.title}
              description={featuredPost.data.description}
              date={featuredPost.data.date}
              category={featuredPost.data.category}
              slug={featuredPost.id}
              coverImage={featuredPost.data.coverImage}
              featured={true}
            />
          </div>
        </div>
      </section>
    )
  }

  <!-- Recent Posts Grid -->
  {
    recentPosts.length > 0 && (
      <section class="bg-white py-16 md:py-24">
        <div class="mx-auto max-w-7xl px-6 lg:px-10">
          <div class="animate-on-scroll mb-10">
            <p class="mb-2 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold">
              Latest
            </p>
            <h2 class="font-serif text-3xl font-medium text-charcoal md:text-4xl">
              Recent articles
            </h2>
            <div class="mt-5 flex flex-wrap gap-2">
              {categoryFilters.map((cat) => (
                <a
                  href={`/blog/category/${cat.slug}`}
                  class="rounded-full border border-warm-sand/80 bg-ivory px-4 py-1.5 text-xs font-medium tracking-wide text-charcoal/60 transition-all duration-200 hover:-translate-y-0.5 hover:border-rose-gold/30 hover:bg-soft-blush/40 hover:text-charcoal"
                >
                  {cat.label}
                </a>
              ))}
            </div>
          </div>
          <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
            {recentPosts.map((post, i) => (
              <div class={`animate-on-scroll stagger-${(i % 4) + 1}`}>
                <PostCard
                  title={post.data.title}
                  description={post.data.description}
                  date={post.data.date}
                  category={post.data.category}
                  slug={post.id}
                  coverImage={post.data.coverImage}
                />
              </div>
            ))}
          </div>
        </div>
      </section>
    )
  }

  <!-- Category Cards -->
  <section class="bg-ivory py-16 md:py-24">
    <div class="mx-auto max-w-7xl px-6 lg:px-10">
      <div class="animate-on-scroll mb-10 text-center">
        <p class="mb-2 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold">
          Explore
        </p>
        <h2 class="font-serif text-3xl font-medium text-charcoal md:text-4xl">
          Browse by specialty
        </h2>
        <p class="mx-auto mt-3 max-w-lg text-sm leading-relaxed text-charcoal/50">
          Find expert-written content on the procedures and topics that matter most to you.
        </p>
      </div>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {
          categories.map((cat, i) => (
            <a
              href={`/blog/category/${cat.slug}`}
              class={`animate-on-scroll stagger-${i + 1} group rounded-2xl bg-white p-6 shadow-card transition-all duration-400 hover:-translate-y-1 hover:shadow-card-hover`}
            >
              <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-soft-blush/50 transition-colors duration-300 group-hover:bg-rose-gold/10">
                <svg
                  class="h-6 w-6 text-rose-gold-dark"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="1.5"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d={cat.icon} />
                </svg>
              </div>
              <h3 class="font-serif text-xl font-medium text-charcoal">{cat.name}</h3>
              <p class="mt-2 text-sm leading-relaxed text-charcoal/50">{cat.description}</p>
              <span class="mt-4 inline-flex items-center gap-1 text-xs font-medium tracking-wide text-rose-gold transition-all duration-200 group-hover:translate-x-1">
                Browse articles
                <svg
                  class="h-3 w-3"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2.5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                  />
                </svg>
              </span>
            </a>
          ))
        }
      </div>
    </div>
  </section>

  <!-- Trust Section -->
  <section class="bg-white py-16 md:py-24">
    <div class="mx-auto max-w-7xl px-6 lg:px-10">
      <div class="animate-on-scroll rounded-3xl bg-gradient-to-br from-charcoal to-soft-navy p-10 md:p-16">
        <div class="grid items-center gap-10 lg:grid-cols-2 lg:gap-16">
          <div>
            <p class="mb-3 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold">
              Why Trust Us
            </p>
            <h2 class="font-serif text-3xl font-medium text-white md:text-4xl">
              Medical expertise meets editorial excellence
            </h2>
            <p class="mt-4 text-base leading-relaxed text-white/60">
              Every article is written or reviewed by board-certified plastic surgeons. We combine
              clinical accuracy with accessible, compassionate writing to help you make confident
              decisions.
            </p>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="rounded-2xl bg-white/5 p-6 backdrop-blur-sm">
              <p class="font-serif text-3xl font-medium text-rose-gold">100%</p>
              <p class="mt-1 text-xs text-white/50">Medically reviewed content</p>
            </div>
            <div class="rounded-2xl bg-white/5 p-6 backdrop-blur-sm">
              <p class="font-serif text-3xl font-medium text-rose-gold">25+</p>
              <p class="mt-1 text-xs text-white/50">Years combined experience</p>
            </div>
            <div class="rounded-2xl bg-white/5 p-6 backdrop-blur-sm">
              <p class="font-serif text-3xl font-medium text-rose-gold">ABPS</p>
              <p class="mt-1 text-xs text-white/50">Board certified surgeons</p>
            </div>
            <div class="rounded-2xl bg-white/5 p-6 backdrop-blur-sm">
              <p class="font-serif text-3xl font-medium text-rose-gold">0</p>
              <p class="mt-1 text-xs text-white/50">Sponsored content</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="bg-ivory py-16 md:py-24">
    <div class="mx-auto max-w-7xl px-6 lg:px-10">
      <div class="animate-on-scroll mx-auto max-w-2xl text-center">
        <h2 class="font-serif text-3xl font-medium text-charcoal md:text-4xl">
          Ready to start your journey?
        </h2>
        <p class="mt-4 text-base leading-relaxed text-charcoal/60">
          Schedule a confidential consultation with one of our board-certified surgeons. No pressure,
          just expert guidance tailored to your goals.
        </p>
        <div class="mt-8 flex flex-wrap items-center justify-center gap-4">
          <a
            href="/contact"
            class="inline-flex items-center gap-2 rounded-lg bg-gradient-to-br from-rose-gold to-rose-gold-dark px-8 py-4 text-sm font-medium text-white shadow-cta transition-all duration-300 hover:-translate-y-0.5 hover:shadow-cta-hover"
          >
            Book a Consultation
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>
            </svg>
          </a>
          <a
            href="/about"
            class="inline-flex items-center gap-2 rounded-lg border border-warm-sand px-8 py-4 text-sm font-medium text-charcoal transition-all duration-200 hover:border-soft-blush hover:bg-soft-blush"
          >
            Learn More About Us
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
