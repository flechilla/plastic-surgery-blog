---
import { getCollection } from 'astro:content';
import BaseLayout from '@layouts/BaseLayout.astro';
import PostCard from '@components/PostCard.astro';
import { formatDate } from '@lib/utils';

// Fetch all collections for dynamic data
const allPosts = await getCollection('blog', ({ data }) => !data.draft);
const allClinics = await getCollection('clinics');
const allCities = await getCollection('cities');

const sortedPosts = allPosts.sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime()
);

const featuredPost = sortedPosts.find((p) => p.data.featured);
const recentPosts = sortedPosts.filter((p) => p !== featuredPost).slice(0, 6);

// Dynamic stats
const totalArticles = allPosts.length;
const totalClinics = allClinics.length;
const totalCities = allCities.length;

// Top 6 cities by clinic count
const cityClinicCounts = new Map<string, number>();
for (const clinic of allClinics) {
  const city = clinic.data.city;
  cityClinicCounts.set(city, (cityClinicCounts.get(city) || 0) + 1);
}

const topCities = allCities
  .map((city) => ({
    ...city,
    clinicCount: cityClinicCounts.get(city.data.slug) || 0,
  }))
  .sort((a, b) => b.clinicCount - a.clinicCount)
  .slice(0, 6);

// Procedure quick-links
const procedures = [
  {
    name: 'Rhinoplasty',
    category: 'facial',
    description: 'Nose reshaping for harmony & balance',
    icon: `<svg viewBox="0 0 48 48" fill="none" class="h-10 w-10"><path d="M24 6c-2 8-8 16-8 24a8 8 0 0016 0c0-8-6-16-8-24z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 34c2 2 4 3 6 3s4-1 6-3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>`,
  },
  {
    name: 'Breast Augmentation',
    category: 'breast',
    description: 'Volume, shape & confidence restored',
    icon: `<svg viewBox="0 0 48 48" fill="none" class="h-10 w-10"><path d="M24 14c-6 0-12 4-14 12-1 4 1 8 4 10s8 2 10-1c2 3 7 3 10 1s5-6 4-10c-2-8-8-12-14-12z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  },
  {
    name: 'BBL',
    category: 'body',
    description: 'Brazilian butt lift sculpting',
    icon: `<svg viewBox="0 0 48 48" fill="none" class="h-10 w-10"><path d="M20 8c-4 6-8 14-7 22 1 6 4 10 8 10s6-2 7-6c1 4 3 6 7 6s7-4 8-10c1-8-3-16-7-22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  },
  {
    name: 'Botox & Fillers',
    category: 'non-surgical',
    description: 'Non-invasive rejuvenation',
    icon: `<svg viewBox="0 0 48 48" fill="none" class="h-10 w-10"><rect x="18" y="6" width="12" height="28" rx="6" stroke="currentColor" stroke-width="1.5"/><path d="M22 34v8M26 34v8M18 16h12M18 22h12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><circle cx="36" cy="12" r="2" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="18" r="2" stroke="currentColor" stroke-width="1.5"/></svg>`,
  },
  {
    name: 'Liposuction',
    category: 'body',
    description: 'Precision fat removal & contouring',
    icon: `<svg viewBox="0 0 48 48" fill="none" class="h-10 w-10"><path d="M28 6v8l-4 4v20c0 2.2 1.8 4 4 4h0c2.2 0 4-1.8 4-4V18l-4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M24 18c-4 2-8 6-8 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><circle cx="16" cy="36" r="3" stroke="currentColor" stroke-width="1.5"/></svg>`,
  },
  {
    name: 'Facelift',
    category: 'facial',
    description: 'Turn back the clock naturally',
    icon: `<svg viewBox="0 0 48 48" fill="none" class="h-10 w-10"><ellipse cx="24" cy="22" rx="12" ry="16" stroke="currentColor" stroke-width="1.5"/><path d="M18 20c0 1.1.9 2 2 2s2-.9 2-2M26 20c0 1.1.9 2 2 2s2-.9 2-2M20 28c1.5 2 3.5 3 4 3s2.5-1 4-3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12 18c-3-1-5 1-4 4M36 18c3-1 5 1 4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>`,
  },
];

// City gradient/color assignments for visual variety
const cityAccents = [
  { bg: 'from-soft-blush/40 to-rose-gold/10', icon: 'text-rose-gold', glow: 'bg-rose-gold/5 group-hover:bg-rose-gold/10' },
  { bg: 'from-deep-sage/10 to-warm-sand/20', icon: 'text-deep-sage', glow: 'bg-deep-sage/5 group-hover:bg-deep-sage/10' },
  { bg: 'from-soft-navy/10 to-soft-blush/20', icon: 'text-soft-navy', glow: 'bg-soft-navy/5 group-hover:bg-soft-navy/10' },
  { bg: 'from-warm-sand/30 to-soft-blush/20', icon: 'text-rose-gold-dark', glow: 'bg-rose-gold-dark/5 group-hover:bg-rose-gold-dark/10' },
  { bg: 'from-deep-sage/15 to-ivory', icon: 'text-deep-sage', glow: 'bg-deep-sage/5 group-hover:bg-deep-sage/10' },
  { bg: 'from-soft-navy/8 to-warm-sand/15', icon: 'text-soft-navy', glow: 'bg-soft-navy/5 group-hover:bg-soft-navy/10' },
];
---

<BaseLayout title="Aesthetic Surgery Journal | Expert Insights on Cosmetic Procedures">

  <!-- ============================================
       HERO SECTION
       ============================================ -->
  <section class="relative overflow-hidden bg-ivory">
    <!-- Decorative background elements -->
    <div class="pointer-events-none absolute inset-0">
      <div class="absolute -top-24 -right-24 h-[500px] w-[500px] rounded-full bg-soft-blush/30 blur-3xl"></div>
      <div class="absolute -bottom-32 -left-32 h-[400px] w-[400px] rounded-full bg-warm-sand/25 blur-3xl"></div>
      <div class="absolute top-1/2 left-1/2 h-[300px] w-[300px] -translate-x-1/2 -translate-y-1/2 rounded-full bg-rose-gold/5 blur-3xl"></div>
    </div>

    <div class="relative mx-auto max-w-7xl px-6 py-20 md:py-28 lg:px-10 lg:py-36">
      <div class="mx-auto max-w-4xl text-center">
        <div class="animate-on-scroll">
          <p class="mb-5 text-xs font-medium uppercase tracking-[0.25em] text-rose-gold">
            Board-Certified Expertise &middot; Evidence-Based Insights
          </p>
          <h1 class="font-serif text-4xl leading-[1.08] font-medium text-charcoal md:text-5xl lg:text-[3.75rem]">
            Your guide to <span class="italic text-rose-gold-dark">confident</span><br class="hidden sm:inline" />
            aesthetic decisions
          </h1>
          <p class="mx-auto mt-6 max-w-2xl text-lg leading-relaxed text-charcoal/55">
            Evidence-based insights from board-certified surgeons. Explore {totalArticles}+ articles,
            {totalClinics}+ verified clinics, and expert guidance you can trust.
          </p>
        </div>

        <!-- Search Bar -->
        <div class="animate-on-scroll stagger-1 mx-auto mt-10 max-w-2xl">
          <form id="hero-search-form" class="group relative">
            <div class="relative flex items-center overflow-hidden rounded-2xl border border-warm-sand/60 bg-white shadow-card transition-all duration-300 focus-within:border-rose-gold/40 focus-within:shadow-card-hover">
              <div class="pointer-events-none pl-5 text-charcoal/30">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                </svg>
              </div>
              <input
                type="text"
                id="hero-search"
                placeholder="Search clinics, procedures, articles..."
                class="w-full bg-transparent px-4 py-4.5 text-base text-charcoal outline-none placeholder:text-charcoal/35 md:py-5"
                autocomplete="off"
              />
              <button
                type="submit"
                class="mr-2.5 shrink-0 rounded-xl bg-gradient-to-br from-rose-gold to-rose-gold-dark px-6 py-2.5 text-sm font-medium text-white shadow-cta transition-all duration-300 hover:-translate-y-0.5 hover:shadow-cta-hover"
              >
                Search
              </button>
            </div>
            <!-- Quick search suggestions -->
            <div class="mt-4 flex flex-wrap items-center justify-center gap-2">
              <span class="text-xs text-charcoal/35">Popular:</span>
              <a href="/blog/category/facial" class="rounded-full border border-warm-sand/50 px-3.5 py-1 text-xs font-medium text-charcoal/50 transition-all duration-200 hover:border-rose-gold/30 hover:bg-soft-blush/40 hover:text-charcoal">Rhinoplasty</a>
              <a href="/blog/category/breast" class="rounded-full border border-warm-sand/50 px-3.5 py-1 text-xs font-medium text-charcoal/50 transition-all duration-200 hover:border-rose-gold/30 hover:bg-soft-blush/40 hover:text-charcoal">Breast Augmentation</a>
              <a href="/blog/category/non-surgical" class="rounded-full border border-warm-sand/50 px-3.5 py-1 text-xs font-medium text-charcoal/50 transition-all duration-200 hover:border-rose-gold/30 hover:bg-soft-blush/40 hover:text-charcoal">Botox</a>
              <a href="/clinics" class="rounded-full border border-warm-sand/50 px-3.5 py-1 text-xs font-medium text-charcoal/50 transition-all duration-200 hover:border-rose-gold/30 hover:bg-soft-blush/40 hover:text-charcoal">Find a Clinic</a>
            </div>
          </form>
        </div>

        <!-- Dynamic Stats -->
        <div class="animate-on-scroll stagger-2 mx-auto mt-14 max-w-xl">
          <div class="flex items-center justify-center gap-8 md:gap-12">
            <a href="/blog" class="group/stat text-center transition-transform duration-200 hover:-translate-y-0.5">
              <p class="font-serif text-3xl font-medium text-charcoal md:text-4xl">{totalArticles}<span class="text-rose-gold">+</span></p>
              <p class="mt-1 text-[11px] font-medium uppercase tracking-[0.15em] text-charcoal/40 transition-colors group-hover/stat:text-charcoal/60">Articles</p>
            </a>
            <div class="h-10 w-px bg-warm-sand/60"></div>
            <a href="/clinics" class="group/stat text-center transition-transform duration-200 hover:-translate-y-0.5">
              <p class="font-serif text-3xl font-medium text-charcoal md:text-4xl">{totalClinics}<span class="text-rose-gold">+</span></p>
              <p class="mt-1 text-[11px] font-medium uppercase tracking-[0.15em] text-charcoal/40 transition-colors group-hover/stat:text-charcoal/60">Clinics</p>
            </a>
            <div class="h-10 w-px bg-warm-sand/60"></div>
            <a href="/clinics" class="group/stat text-center transition-transform duration-200 hover:-translate-y-0.5">
              <p class="font-serif text-3xl font-medium text-charcoal md:text-4xl">{totalCities}<span class="text-rose-gold">+</span></p>
              <p class="mt-1 text-[11px] font-medium uppercase tracking-[0.15em] text-charcoal/40 transition-colors group-hover/stat:text-charcoal/60">Cities</p>
            </a>
          </div>
        </div>

        <!-- Trust Indicators -->
        <div class="animate-on-scroll stagger-3 mt-10 flex flex-wrap items-center justify-center gap-6 md:gap-8">
          <div class="flex items-center gap-2">
            <div class="flex h-7 w-7 items-center justify-center rounded-full bg-deep-sage/10">
              <svg class="h-3.5 w-3.5 text-deep-sage" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
              </svg>
            </div>
            <span class="text-xs font-medium text-charcoal/45">Board Certified</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="flex h-7 w-7 items-center justify-center rounded-full bg-soft-navy/10">
              <svg class="h-3.5 w-3.5 text-soft-navy" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
              </svg>
            </div>
            <span class="text-xs font-medium text-charcoal/45">Peer Reviewed</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="flex h-7 w-7 items-center justify-center rounded-full bg-rose-gold/10">
              <svg class="h-3.5 w-3.5 text-rose-gold" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.438 60.438 0 00-.491 6.347A48.62 48.62 0 0112 20.904a48.62 48.62 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.636 50.636 0 00-2.658-.813A59.906 59.906 0 0112 3.493a59.903 59.903 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0112 13.489a50.702 50.702 0 017.74-3.342" />
              </svg>
            </div>
            <span class="text-xs font-medium text-charcoal/45">Evidence Based</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Subtle divider -->
    <div class="h-px bg-gradient-to-r from-transparent via-warm-sand/60 to-transparent"></div>
  </section>

  <!-- ============================================
       PROCEDURE QUICK-LINKS
       ============================================ -->
  <section class="bg-white py-16 md:py-24">
    <div class="mx-auto max-w-7xl px-6 lg:px-10">
      <div class="animate-on-scroll mb-12 text-center">
        <p class="mb-2 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold">
          Procedures
        </p>
        <h2 class="font-serif text-3xl font-medium text-charcoal md:text-4xl">
          Explore popular procedures
        </h2>
        <p class="mx-auto mt-3 max-w-lg text-sm leading-relaxed text-charcoal/50">
          Expert guidance on the most sought-after aesthetic procedures, from surgical to non-invasive treatments.
        </p>
      </div>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {procedures.map((proc, i) => (
          <a
            href={`/blog/category/${proc.category}`}
            class={`animate-on-scroll stagger-${(i % 4) + 1} group relative overflow-hidden rounded-2xl border border-warm-sand/30 bg-ivory p-7 transition-all duration-400 hover:-translate-y-1 hover:border-rose-gold/20 hover:shadow-card-hover`}
          >
            <div class="absolute -top-8 -right-8 h-24 w-24 rounded-full bg-soft-blush/30 blur-2xl transition-all duration-500 group-hover:bg-rose-gold/10"></div>
            <div class="relative">
              <div class="mb-4 flex h-14 w-14 items-center justify-center rounded-2xl bg-white text-rose-gold-dark shadow-sm transition-all duration-300 group-hover:shadow-md group-hover:scale-105">
                <Fragment set:html={proc.icon} />
              </div>
              <h3 class="font-serif text-xl font-medium text-charcoal transition-colors duration-200 group-hover:text-rose-gold-dark">{proc.name}</h3>
              <p class="mt-1.5 text-sm leading-relaxed text-charcoal/50">{proc.description}</p>
              <span class="mt-4 inline-flex items-center gap-1.5 text-xs font-medium tracking-wide text-rose-gold transition-all duration-200 group-hover:translate-x-1">
                Learn more
                <svg class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                </svg>
              </span>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Subtle divider -->
  <div class="h-px bg-gradient-to-r from-transparent via-warm-sand/40 to-transparent"></div>

  <!-- ============================================
       DYNAMIC CLINIC DIRECTORY
       ============================================ -->
  <section class="bg-ivory py-16 md:py-24">
    <div class="mx-auto max-w-7xl px-6 lg:px-10">
      <div class="animate-on-scroll mb-12 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-end">
        <div>
          <p class="mb-2 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold">
            Clinic Directory
          </p>
          <h2 class="font-serif text-3xl font-medium text-charcoal md:text-4xl">
            Find a surgeon near you
          </h2>
          <p class="mt-3 max-w-lg text-sm leading-relaxed text-charcoal/50">
            Browse {totalClinics}+ board-certified plastic surgeons and cosmetic clinics across {totalCities} cities.
          </p>
        </div>
        <a
          href="/clinics"
          class="inline-flex items-center gap-2 rounded-lg border border-warm-sand px-5 py-2.5 text-sm font-medium text-charcoal transition-all duration-200 hover:border-rose-gold/30 hover:bg-soft-blush/40"
        >
          View all clinics
          <svg class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
          </svg>
        </a>
      </div>

      <div class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3">
        {topCities.map((city, i) => {
          const accent = cityAccents[i % cityAccents.length];
          return (
            <a
              href={`/clinics/${city.data.slug}`}
              class={`animate-on-scroll stagger-${(i % 4) + 1} group relative overflow-hidden rounded-2xl bg-gradient-to-br ${accent.bg} p-7 transition-all duration-400 hover:-translate-y-1 hover:shadow-card-hover`}
            >
              <div class={`absolute top-0 right-0 h-32 w-32 rounded-full ${accent.glow} blur-2xl transition-all duration-500`}></div>
              <div class="relative">
                <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-white shadow-sm">
                  <svg class={`h-6 w-6 ${accent.icon}`} fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
                  </svg>
                </div>
                <h3 class="font-serif text-xl font-medium text-charcoal">{city.data.name}, {city.data.state}</h3>
                <div class="mt-3 flex items-center gap-3">
                  <span class="rounded-full bg-white/70 px-3 py-1 text-xs font-medium text-charcoal/70">{city.clinicCount} Clinics</span>
                  <span class="rounded-full bg-white/70 px-3 py-1 text-xs font-medium text-charcoal/70">Real Reviews</span>
                </div>
                <span class={`mt-5 inline-flex items-center gap-1.5 text-sm font-medium ${accent.icon} transition-all duration-200 group-hover:translate-x-1`}>
                  Browse clinics
                  <svg class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                  </svg>
                </span>
              </div>
            </a>
          );
        })}
      </div>
    </div>
  </section>

  <!-- ============================================
       FEATURED POST
       ============================================ -->
  {featuredPost && (
    <section id="featured" class="bg-white py-16 md:py-24">
      <div class="mx-auto max-w-7xl px-6 lg:px-10">
        <div class="animate-on-scroll mb-10 flex items-end justify-between">
          <div>
            <p class="mb-2 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold">
              Featured
            </p>
            <h2 class="font-serif text-3xl font-medium text-charcoal md:text-4xl">
              Editor&rsquo;s pick
            </h2>
          </div>
          <a
            href="/blog"
            class="hidden text-sm font-medium text-charcoal/50 transition-colors hover:text-charcoal md:inline-flex md:items-center md:gap-1"
          >
            View all articles
            <svg class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
            </svg>
          </a>
        </div>
        <div class="animate-on-scroll stagger-1">
          <PostCard
            title={featuredPost.data.title}
            description={featuredPost.data.description}
            date={featuredPost.data.date}
            category={featuredPost.data.category}
            slug={featuredPost.id}
            coverImage={featuredPost.data.coverImage}
            featured={true}
          />
        </div>
      </div>
    </section>
  )}

  <!-- ============================================
       RECENT ARTICLES
       ============================================ -->
  {recentPosts.length > 0 && (
    <section class="bg-ivory py-16 md:py-24">
      <div class="mx-auto max-w-7xl px-6 lg:px-10">
        <div class="animate-on-scroll mb-10 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-end">
          <div>
            <p class="mb-2 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold">
              Latest
            </p>
            <h2 class="font-serif text-3xl font-medium text-charcoal md:text-4xl">
              Recent articles
            </h2>
            <p class="mt-2 text-sm text-charcoal/50">{totalArticles} expert-written articles and counting</p>
          </div>
          <a
            href="/blog"
            class="inline-flex items-center gap-2 rounded-lg border border-warm-sand px-5 py-2.5 text-sm font-medium text-charcoal transition-all duration-200 hover:border-rose-gold/30 hover:bg-soft-blush/40"
          >
            View all articles
            <svg class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
            </svg>
          </a>
        </div>
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {recentPosts.map((post, i) => (
            <div class={`animate-on-scroll stagger-${(i % 4) + 1}`}>
              <PostCard
                title={post.data.title}
                description={post.data.description}
                date={post.data.date}
                category={post.data.category}
                slug={post.id}
                coverImage={post.data.coverImage}
              />
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- ============================================
       TRUST SECTION
       ============================================ -->
  <section class="bg-white py-16 md:py-24">
    <div class="mx-auto max-w-7xl px-6 lg:px-10">
      <div class="animate-on-scroll rounded-3xl bg-gradient-to-br from-charcoal to-soft-navy p-10 md:p-16">
        <div class="grid items-center gap-10 lg:grid-cols-2 lg:gap-16">
          <div>
            <p class="mb-3 text-xs font-medium uppercase tracking-[0.2em] text-rose-gold">
              Why Trust Us
            </p>
            <h2 class="font-serif text-3xl font-medium text-white md:text-4xl">
              Medical expertise meets editorial excellence
            </h2>
            <p class="mt-4 text-base leading-relaxed text-white/60">
              Every article is written or reviewed by board-certified plastic surgeons. We combine
              clinical accuracy with accessible, compassionate writing to help you make confident
              decisions.
            </p>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="rounded-2xl bg-white/5 p-6 backdrop-blur-sm">
              <p class="font-serif text-3xl font-medium text-rose-gold">{totalArticles}+</p>
              <p class="mt-1 text-xs text-white/50">Expert articles published</p>
            </div>
            <div class="rounded-2xl bg-white/5 p-6 backdrop-blur-sm">
              <p class="font-serif text-3xl font-medium text-rose-gold">{totalClinics}+</p>
              <p class="mt-1 text-xs text-white/50">Verified clinics listed</p>
            </div>
            <div class="rounded-2xl bg-white/5 p-6 backdrop-blur-sm">
              <p class="font-serif text-3xl font-medium text-rose-gold">{totalCities}</p>
              <p class="mt-1 text-xs text-white/50">Cities covered</p>
            </div>
            <div class="rounded-2xl bg-white/5 p-6 backdrop-blur-sm">
              <p class="font-serif text-3xl font-medium text-rose-gold">0</p>
              <p class="mt-1 text-xs text-white/50">Sponsored content</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================================
       CTA SECTION
       ============================================ -->
  <section class="bg-ivory py-16 md:py-24">
    <div class="mx-auto max-w-7xl px-6 lg:px-10">
      <div class="animate-on-scroll mx-auto max-w-2xl text-center">
        <h2 class="font-serif text-3xl font-medium text-charcoal md:text-4xl">
          Ready to start your journey?
        </h2>
        <p class="mt-4 text-base leading-relaxed text-charcoal/60">
          Schedule a confidential consultation with one of our board-certified surgeons. No pressure,
          just expert guidance tailored to your goals.
        </p>
        <div class="mt-8 flex flex-wrap items-center justify-center gap-4">
          <a
            href="/contact"
            class="inline-flex items-center gap-2 rounded-lg bg-gradient-to-br from-rose-gold to-rose-gold-dark px-8 py-4 text-sm font-medium text-white shadow-cta transition-all duration-300 hover:-translate-y-0.5 hover:shadow-cta-hover"
          >
            Book a Consultation
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
            </svg>
          </a>
          <a
            href="/about"
            class="inline-flex items-center gap-2 rounded-lg border border-warm-sand px-8 py-4 text-sm font-medium text-charcoal transition-all duration-200 hover:border-soft-blush hover:bg-soft-blush"
          >
            Learn More About Us
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Search bar script -->
  <script>
    const form = document.getElementById('hero-search-form');
    const input = document.getElementById('hero-search') as HTMLInputElement;

    form?.addEventListener('submit', (e) => {
      e.preventDefault();
      const query = input?.value.trim();
      if (!query) return;

      const q = query.toLowerCase();
      const clinicTerms = ['clinic', 'surgeon', 'doctor', 'near', 'miami', 'fort', 'city'];
      const isClinicSearch = clinicTerms.some((term) => q.includes(term));

      if (isClinicSearch) {
        window.location.href = `/clinics?search=${encodeURIComponent(query)}`;
      } else {
        window.location.href = `/blog?search=${encodeURIComponent(query)}`;
      }
    });
  </script>
</BaseLayout>
