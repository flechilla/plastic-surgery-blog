---
interface Props {
  phone: string;
  website?: string;
  email?: string;
  address: string;
  city: string;
  state: string;
  zipCode: string;
  googleMapsUrl?: string;
  logo?: string;
  clinicName?: string;
}

const { phone, website, email, address, city, state, zipCode, googleMapsUrl, logo, clinicName } = Astro.props;

const cleanPhone = phone.replace(/[^+\d]/g, '');
const displayWebsite = website ? website.replace(/^https?:\/\//, '').replace(/\/$/, '').slice(0, 30) : '';
---

<aside class="rounded-2xl bg-white p-6 shadow-card">
  {/* Logo */}
  {logo && (
    <div class="mb-5 flex justify-center">
      <img
        src={logo}
        alt={`${clinicName || 'Clinic'} logo`}
        class="h-16 max-w-[180px] object-contain"
        loading="lazy"
      />
    </div>
  )}
  <h3 class="font-serif text-lg font-medium text-charcoal">Contact Information</h3>

  <div class="mt-5 space-y-4">
    <!-- Phone -->
    <a
      href={`tel:${cleanPhone}`}
      class="group flex items-start gap-3 rounded-lg p-2 transition-colors hover:bg-soft-blush/30"
    >
      <div class="flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-lg bg-rose-gold/10">
        <svg class="h-4 w-4 text-rose-gold-dark" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
        </svg>
      </div>
      <div>
        <p class="text-xs font-medium uppercase tracking-wider text-charcoal/40">Phone</p>
        <p class="text-sm font-medium text-charcoal group-hover:text-rose-gold-dark">{phone}</p>
      </div>
    </a>

    <!-- Website -->
    {website && (
      <a
        href={website}
        target="_blank"
        rel="noopener noreferrer"
        class="group flex items-start gap-3 rounded-lg p-2 transition-colors hover:bg-soft-blush/30"
      >
        <div class="flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-lg bg-soft-navy/10">
          <svg class="h-4 w-4 text-soft-navy" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418" />
          </svg>
        </div>
        <div class="min-w-0">
          <p class="text-xs font-medium uppercase tracking-wider text-charcoal/40">Website</p>
          <p class="truncate text-sm font-medium text-charcoal group-hover:text-soft-navy">{displayWebsite}</p>
        </div>
      </a>
    )}

    <!-- Email -->
    {email && (
      <a
        href={`mailto:${email}`}
        class="group flex items-start gap-3 rounded-lg p-2 transition-colors hover:bg-soft-blush/30"
      >
        <div class="flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-lg bg-deep-sage/10">
          <svg class="h-4 w-4 text-deep-sage" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
          </svg>
        </div>
        <div class="min-w-0">
          <p class="text-xs font-medium uppercase tracking-wider text-charcoal/40">Email</p>
          <p class="truncate text-sm font-medium text-charcoal group-hover:text-deep-sage">{email}</p>
        </div>
      </a>
    )}

    <!-- Address -->
    <div class="flex items-start gap-3 p-2">
      <div class="flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-lg bg-warm-sand/40">
        <svg class="h-4 w-4 text-charcoal/50" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
        </svg>
      </div>
      <div>
        <p class="text-xs font-medium uppercase tracking-wider text-charcoal/40">Address</p>
        <p class="text-sm text-charcoal">{address}</p>
        <p class="text-sm text-charcoal/60">{city}, {state} {zipCode}</p>
        {googleMapsUrl && (
          <a
            href={googleMapsUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="mt-1 inline-flex items-center gap-1 text-xs font-medium text-rose-gold-dark hover:underline"
          >
            <svg class="h-3 w-3" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
            View on Google Maps
          </a>
        )}
      </div>
    </div>
  </div>

  <!-- CTA -->
  <div class="mt-6 space-y-3">
    <a
      href={`tel:${cleanPhone}`}
      class="flex w-full items-center justify-center gap-2 rounded-lg bg-gradient-to-br from-rose-gold to-rose-gold-dark px-4 py-3 text-sm font-medium text-white shadow-cta transition-all duration-300 hover:-translate-y-0.5 hover:shadow-cta-hover"
    >
      <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
      </svg>
      Call Now
    </a>
    {website && (
      <a
        href={website}
        target="_blank"
        rel="noopener noreferrer"
        class="flex w-full items-center justify-center gap-2 rounded-lg border border-warm-sand px-4 py-3 text-sm font-medium text-charcoal transition-all duration-200 hover:border-soft-blush hover:bg-soft-blush"
      >
        Visit Website
      </a>
    )}
    {googleMapsUrl && (
      <a
        href={googleMapsUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="flex w-full items-center justify-center gap-2 rounded-lg border border-warm-sand px-4 py-3 text-sm font-medium text-charcoal transition-all duration-200 hover:border-deep-sage/40 hover:bg-deep-sage/10"
      >
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
        </svg>
        Get Directions
      </a>
    )}
  </div>
</aside>
