---
import RatingStars from './RatingStars.astro';

interface Props {
  author: string;
  rating: number;
  date: string;
  procedure?: string;
  text: string;
  source?: string;
}

const { author, rating, date, procedure, text, source } = Astro.props;

const formattedDate = new Date(date).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<article class="rounded-2xl bg-white p-6 shadow-card">
  <!-- Header -->
  <div class="flex items-start justify-between gap-4">
    <div class="flex items-center gap-3">
      <div class="flex h-10 w-10 items-center justify-center rounded-full bg-soft-blush/60">
        <span class="text-sm font-medium text-rose-gold-dark">
          {author.charAt(0).toUpperCase()}
        </span>
      </div>
      <div>
        <p class="text-sm font-medium text-charcoal">{author}</p>
        {procedure && (
          <p class="text-xs text-charcoal/40">{procedure}</p>
        )}
      </div>
    </div>
    <RatingStars rating={rating} size="sm" />
  </div>

  <!-- Review Text -->
  <p class="mt-4 text-sm leading-relaxed text-charcoal/70">{text}</p>

  <!-- Footer -->
  <div class="mt-4 flex items-center justify-between border-t border-warm-sand/30 pt-3">
    <time class="text-xs text-charcoal/40" datetime={date}>
      {formattedDate}
    </time>
    {source && (
      <span class="text-xs text-charcoal/30">via {source}</span>
    )}
  </div>
</article>
